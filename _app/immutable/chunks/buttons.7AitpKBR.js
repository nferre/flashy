import{s as j,d as U,i as V,n as E}from"./scheduler.CEdikFY2.js";import{S as H,i as K,e as L,k as Q,c as T,a as P,l as X,d as R,b as A,o as D,f as Y,m as N,n as Z}from"./index.DEczat12.js";const F="http://www.w3.org/2000/svg";class ${constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}function k(e,t,s,n,i){return{type:"path",ops:S(e,t,s,n,i)}}function J(e,t,s){const n=(e||[]).length;if(n>2){const i=[];for(let r=0;r<n-1;r++)i.push(...S(e[r][0],e[r][1],e[r+1][0],e[r+1][1],s));return t&&i.push(...S(e[n-1][0],e[n-1][1],e[0][0],e[0][1],s)),{type:"path",ops:i}}return n===2?k(e[0][0],e[0][1],e[1][0],e[1][1],s):{type:"path",ops:[]}}function tt(e,t,s,n,i){return function(r,a){return J(r,!0,a)}([[e,t],[e+s,t],[e+s,t+n],[e,t+n]],i)}function W(e,t,s,n,i){return function(r,a,h,o){const[f,d]=B(o.increment,r,a,o.rx,o.ry,1,o.increment*O(.1,O(.4,1,h),h),h);let _=q(f,null,h);if(!h.disableMultiStroke){const[u]=B(o.increment,r,a,o.rx,o.ry,1.5,0,h),c=q(u,null,h);_=_.concat(c)}return{estimatedPoints:d,opset:{type:"path",ops:_}}}(e,t,i,function(r,a,h){const o=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(r/2,2)+Math.pow(a/2,2))/2)),f=Math.max(h.curveStepCount,h.curveStepCount/Math.sqrt(200)*o),d=2*Math.PI/f;let _=Math.abs(r/2),u=Math.abs(a/2);const c=1-h.curveFitting;return _+=w(_*c,h),u+=w(u*c,h),{increment:d,rx:_,ry:u}}(s,n,i)).opset}function G(e){return e.randomizer||(e.randomizer=new $(e.seed||0)),e.randomizer.next()}function O(e,t,s,n=1){return s.roughness*n*(G(s)*(t-e)+e)}function w(e,t,s=1){return O(-e,e,t,s)}function S(e,t,s,n,i,r=!1){const a=r?i.disableMultiStrokeFill:i.disableMultiStroke,h=I(e,t,s,n,i,!0,!1);if(a)return h;const o=I(e,t,s,n,i,!0,!0);return h.concat(o)}function I(e,t,s,n,i,r,a){const h=Math.pow(e-s,2)+Math.pow(t-n,2),o=Math.sqrt(h);let f=1;f=o<200?1:o>500?.4:-.0016668*o+1.233334;let d=i.maxRandomnessOffset||0;d*d*100>h&&(d=o/10);const _=d/2,u=.2+.2*G(i);let c=i.bowing*i.maxRandomnessOffset*(n-t)/200,l=i.bowing*i.maxRandomnessOffset*(e-s)/200;c=w(c,i,f),l=w(l,i,f);const m=[],g=()=>w(_,i,f),b=()=>w(d,i,f);return r&&(a?m.push({op:"move",data:[e+g(),t+g()]}):m.push({op:"move",data:[e+w(d,i,f),t+w(d,i,f)]})),a?m.push({op:"bcurveTo",data:[c+e+(s-e)*u+g(),l+t+(n-t)*u+g(),c+e+2*(s-e)*u+g(),l+t+2*(n-t)*u+g(),s+g(),n+g()]}):m.push({op:"bcurveTo",data:[c+e+(s-e)*u+b(),l+t+(n-t)*u+b(),c+e+2*(s-e)*u+b(),l+t+2*(n-t)*u+b(),s+b(),n+b()]}),m}function q(e,t,s){const n=e.length,i=[];if(n>3){const r=[],a=1-s.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let h=1;h+2<n;h++){const o=e[h];r[0]=[o[0],o[1]],r[1]=[o[0]+(a*e[h+1][0]-a*e[h-1][0])/6,o[1]+(a*e[h+1][1]-a*e[h-1][1])/6],r[2]=[e[h+1][0]+(a*e[h][0]-a*e[h+2][0])/6,e[h+1][1]+(a*e[h][1]-a*e[h+2][1])/6],r[3]=[e[h+1][0],e[h+1][1]],i.push({op:"bcurveTo",data:[r[1][0],r[1][1],r[2][0],r[2][1],r[3][0],r[3][1]]})}if(t&&t.length===2){const h=s.maxRandomnessOffset;i.push({op:"lineTo",data:[t[0]+w(h,s),t[1]+w(h,s)]})}}else n===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):n===2&&i.push(...S(e[0][0],e[0][1],e[1][0],e[1][1],s));return i}function B(e,t,s,n,i,r,a,h){const o=[],f=[],d=w(.5,h)-Math.PI/2;f.push([w(r,h)+t+.9*n*Math.cos(d-e),w(r,h)+s+.9*i*Math.sin(d-e)]);for(let _=d;_<2*Math.PI+d-.01;_+=e){const u=[w(r,h)+t+n*Math.cos(_),w(r,h)+s+i*Math.sin(_)];o.push(u),f.push(u)}return f.push([w(r,h)+t+n*Math.cos(d+2*Math.PI+.5*a),w(r,h)+s+i*Math.sin(d+2*Math.PI+.5*a)]),f.push([w(r,h)+t+.98*n*Math.cos(d+a),w(r,h)+s+.98*i*Math.sin(d+a)]),f.push([w(r,h)+t+.9*n*Math.cos(d+.5*a),w(r,h)+s+.9*i*Math.sin(d+.5*a)]),[f,o]}function C(e,t){return{maxRandomnessOffset:2,roughness:e==="highlight"?3:1.5,bowing:1,stroke:"#000",strokeWidth:1.5,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,combineNestedSvgPaths:!1,disableMultiStroke:e!=="double",disableMultiStrokeFill:!1,seed:t}}function et(e,t,s,n,i,r){const a=[];let h=s.strokeWidth||2;const o=function(u){const c=u.padding;if(c||c===0){if(typeof c=="number")return[c,c,c,c];if(Array.isArray(c)){const l=c;if(l.length)switch(l.length){case 4:return[...l];case 1:return[l[0],l[0],l[0],l[0]];case 2:return[...l,...l];case 3:return[...l,l[1]];default:return[l[0],l[1],l[2],l[3]]}}}return[5,5,5,5]}(s),f=s.animate===void 0||!!s.animate,d=s.iterations||2,_=C("single",r);switch(s.type){case"underline":{const u=t.y+t.h+o[2];for(let c=0;c<d;c++)c%2?a.push(k(t.x+t.w,u,t.x,u,_)):a.push(k(t.x,u,t.x+t.w,u,_));break}case"strike-through":{const u=t.y+t.h/2;for(let c=0;c<d;c++)c%2?a.push(k(t.x+t.w,u,t.x,u,_)):a.push(k(t.x,u,t.x+t.w,u,_));break}case"box":{const u=t.x-o[3],c=t.y-o[0],l=t.w+(o[1]+o[3]),m=t.h+(o[0]+o[2]);for(let g=0;g<d;g++)a.push(tt(u,c,l,m,_));break}case"bracket":{const u=Array.isArray(s.brackets)?s.brackets:s.brackets?[s.brackets]:["right"],c=t.x-2*o[3],l=t.x+t.w+2*o[1],m=t.y-2*o[0],g=t.y+t.h+2*o[2];for(const b of u){let p;switch(b){case"bottom":p=[[c,t.y+t.h],[c,g],[l,g],[l,t.y+t.h]];break;case"top":p=[[c,t.y],[c,m],[l,m],[l,t.y]];break;case"left":p=[[t.x,m],[c,m],[c,g],[t.x,g]];break;case"right":p=[[t.x+t.w,m],[l,m],[l,g],[t.x+t.w,g]]}p&&a.push(J(p,!1,_))}break}case"crossed-off":{const u=t.x,c=t.y,l=u+t.w,m=c+t.h;for(let g=0;g<d;g++)g%2?a.push(k(l,m,u,c,_)):a.push(k(u,c,l,m,_));for(let g=0;g<d;g++)g%2?a.push(k(u,m,l,c,_)):a.push(k(l,c,u,m,_));break}case"circle":{const u=C("double",r),c=t.w+(o[1]+o[3]),l=t.h+(o[0]+o[2]),m=t.x-o[3]+c/2,g=t.y-o[0]+l/2,b=Math.floor(d/2),p=d-2*b;for(let v=0;v<b;v++)a.push(W(m,g,c,l,u));for(let v=0;v<p;v++)a.push(W(m,g,c,l,_));break}case"highlight":{const u=C("highlight",r);h=.95*t.h;const c=t.y+t.h/2;for(let l=0;l<d;l++)l%2?a.push(k(t.x+t.w,c,t.x,c,u)):a.push(k(t.x,c,t.x+t.w,c,u));break}}if(a.length){const u=function(b){const p=[];for(const v of b){let x="";for(const M of v.ops){const y=M.data;switch(M.op){case"move":x.trim()&&p.push(x.trim()),x=`M${y[0]} ${y[1]} `;break;case"bcurveTo":x+=`C${y[0]} ${y[1]}, ${y[2]} ${y[3]}, ${y[4]} ${y[5]} `;break;case"lineTo":x+=`L${y[0]} ${y[1]} `}}x.trim()&&p.push(x.trim())}return p}(a),c=[],l=[];let m=0;const g=(b,p,v)=>b.setAttribute(p,v);for(const b of u){const p=document.createElementNS(F,"path");if(g(p,"d",b),g(p,"fill","none"),g(p,"stroke",s.color||"currentColor"),g(p,"stroke-width",""+h),f){const v=p.getTotalLength();c.push(v),m+=v}e.appendChild(p),l.push(p)}if(f){let b=0;for(let p=0;p<l.length;p++){const v=l[p],x=c[p],M=m?i*(x/m):0,y=n+b,z=v.style;z.strokeDashoffset=""+x,z.strokeDasharray=""+x,z.animation=`rough-notation-dash ${M}ms ease-out ${y}ms forwards`,b+=M}}}}class st{constructor(t,s){this._state="unattached",this._resizing=!1,this._seed=Math.floor(Math.random()*2**31),this._lastSizes=[],this._animationDelay=0,this._resizeListener=()=>{this._resizing||(this._resizing=!0,setTimeout(()=>{this._resizing=!1,this._state==="showing"&&this.haveRectsChanged()&&this.show()},400))},this._e=t,this._config=JSON.parse(JSON.stringify(s)),this.attach()}get animate(){return this._config.animate}set animate(t){this._config.animate=t}get animationDuration(){return this._config.animationDuration}set animationDuration(t){this._config.animationDuration=t}get iterations(){return this._config.iterations}set iterations(t){this._config.iterations=t}get color(){return this._config.color}set color(t){this._config.color!==t&&(this._config.color=t,this.refresh())}get strokeWidth(){return this._config.strokeWidth}set strokeWidth(t){this._config.strokeWidth!==t&&(this._config.strokeWidth=t,this.refresh())}get padding(){return this._config.padding}set padding(t){this._config.padding!==t&&(this._config.padding=t,this.refresh())}attach(){if(this._state==="unattached"&&this._e.parentElement){(function(){if(!window.__rno_kf_s){const i=window.__rno_kf_s=document.createElement("style");i.textContent="@keyframes rough-notation-dash { to { stroke-dashoffset: 0; } }",document.head.appendChild(i)}})();const t=this._svg=document.createElementNS(F,"svg");t.setAttribute("class","rough-annotation");const s=t.style;s.position="absolute",s.top="0",s.left="0",s.overflow="visible",s.pointerEvents="none",s.width="100px",s.height="100px";const n=this._config.type==="highlight";if(this._e.insertAdjacentElement(n?"beforebegin":"afterend",t),this._state="not-showing",n){const i=window.getComputedStyle(this._e).position;(!i||i==="static")&&(this._e.style.position="relative")}this.attachListeners()}}detachListeners(){window.removeEventListener("resize",this._resizeListener),this._ro&&this._ro.unobserve(this._e)}attachListeners(){this.detachListeners(),window.addEventListener("resize",this._resizeListener,{passive:!0}),!this._ro&&"ResizeObserver"in window&&(this._ro=new window.ResizeObserver(t=>{for(const s of t)s.contentRect&&this._resizeListener()})),this._ro&&this._ro.observe(this._e)}haveRectsChanged(){if(this._lastSizes.length){const t=this.rects();if(t.length!==this._lastSizes.length)return!0;for(let s=0;s<t.length;s++)if(!this.isSameRect(t[s],this._lastSizes[s]))return!0}return!1}isSameRect(t,s){const n=(i,r)=>Math.round(i)===Math.round(r);return n(t.x,s.x)&&n(t.y,s.y)&&n(t.w,s.w)&&n(t.h,s.h)}isShowing(){return this._state!=="not-showing"}refresh(){this.isShowing()&&!this.pendingRefresh&&(this.pendingRefresh=Promise.resolve().then(()=>{this.isShowing()&&this.show(),delete this.pendingRefresh}))}show(){switch(this._state){case"unattached":break;case"showing":this.hide(),this._svg&&this.render(this._svg,!0);break;case"not-showing":this.attach(),this._svg&&this.render(this._svg,!1)}}hide(){if(this._svg)for(;this._svg.lastChild;)this._svg.removeChild(this._svg.lastChild);this._state="not-showing"}remove(){this._svg&&this._svg.parentElement&&this._svg.parentElement.removeChild(this._svg),this._svg=void 0,this._state="unattached",this.detachListeners()}render(t,s){let n=this._config;s&&(n=JSON.parse(JSON.stringify(this._config)),n.animate=!1);const i=this.rects();let r=0;i.forEach(o=>r+=o.w);const a=n.animationDuration||800;let h=0;for(let o=0;o<i.length;o++){const f=a*(i[o].w/r);et(t,i[o],n,h+this._animationDelay,f,this._seed),h+=f}this._lastSizes=i,this._state="showing"}rects(){const t=[];if(this._svg)if(this._config.multiline){const s=this._e.getClientRects();for(let n=0;n<s.length;n++)t.push(this.svgRect(this._svg,s[n]))}else t.push(this.svgRect(this._svg,this._e.getBoundingClientRect()));return t}svgRect(t,s){const n=t.getBoundingClientRect(),i=s;return{x:(i.x||i.left)-(n.x||n.left),y:(i.y||i.top)-(n.y||n.top),w:i.width,h:i.height}}}function it(e,t){return new st(e,t)}function nt(e,t){function s(a,h){for(let o in h)if(o!=="visible"&&(!h.hasOwnProperty||h.hasOwnProperty(o))){let f=h[o];a[o]!==f&&(a[o]=f)}}function n(a){a?r.show():r.hide()}let i={};s(i,t);let r=it(e,i);return n(t.visible),{update(a){s(r,a),n(a.visible)},destroy(){r.remove()}}}function ot(e){let t,s,n,i,r,a,h;return{c(){t=L("button"),s=L("span"),n=Q(e[1]),this.h()},l(o){t=T(o,"BUTTON",{class:!0});var f=P(t);s=T(f,"SPAN",{});var d=P(s);n=X(d,e[1]),d.forEach(R),f.forEach(R),this.h()},h(){A(t,"class",i=`px-8 py-2 font-semibold text-lg ${e[0]!="rough"?"border-2":""}`),D(t,"border-color",e[2])},m(o,f){Y(o,t,f),N(t,s),N(s,n),a||(h=U(r=nt.call(null,t,{type:"box",visible:e[0]=="rough",color:e[2],iterations:3})),a=!0)},p(o,[f]){f&2&&Z(n,o[1]),f&1&&i!==(i=`px-8 py-2 font-semibold text-lg ${o[0]!="rough"?"border-2":""}`)&&A(t,"class",i),r&&V(r.update)&&f&5&&r.update.call(null,{type:"box",visible:o[0]=="rough",color:o[2],iterations:3}),f&4&&D(t,"border-color",o[2])},i:E,o:E,d(o){o&&R(t),a=!1,h()}}}function at(e,t,s){let{style:n}=t,{text:i="click me"}=t,{color:r="#1e293b'"}=t;return e.$$set=a=>{"style"in a&&s(0,n=a.style),"text"in a&&s(1,i=a.text),"color"in a&&s(2,r=a.color)},[n,i,r]}class ct extends H{constructor(t){super(),K(this,t,at,ot,j,{style:0,text:1,color:2})}}export{ct as B,nt as a};
