import{w as p}from"./index.2-aPcvOh.js";import{s as x,n as y,y as h}from"./scheduler.ckfRQW6s.js";import{S as C,i as v,p as M,f as g,d,e as w,c as _,b as n}from"./index.SwfY9vCr.js";const b=p({nb_session:0,card_memorized:0,timer:new Date(0).getMinutes()});function D(c,e){var a,s,t;if(c==null&&(c={n:0,efactor:2.5,interval:0,last_review_date:new Date().getTime()}),c.n<3)s=c.efactor,e.score<3?(a=0,t=30*1/(24*60)):(a=c.n+1,a==1?t=30*1/(24*60):a==2?t=.5:t=1),t=t*(1+Math.random()*.1);else if(e.score<3)a=0,t=30*1/(24*60),s=Math.max(1.3,c.efactor-.2);else{if(e.lateness>=0){a=c.n+1;var r=0,i=1;if(e.lateness>=.1&&e.score>=3){let l=Math.min(1,e.lateness),f=1+(e.score-3)/4;r=1*l*f}else e.score>=3&&e.score<4&&(i=.8);let o=r+e.score;s=Math.max(1.3,c.efactor+(.1-(5-o)*(.08+(5-o)*.02))),c.n==0?t=1:c.n==1?t=6:t=Math.ceil(c.interval*i*s)}else{a=c.n+1;const o=1+e.lateness,l=Math.min(Math.exp(o*o)-1,1),f=1-l,u=f*e.score+l*3,k=Math.max(1.3,c.efactor+(.1-(5-u)*(.08+(5-u)*.02)));var m;c.n==0?m=1:c.n==1?m=6:m=Math.ceil(c.interval*k),s=c.efactor*f+k*l,t=c.interval*f+m*l}t=t*(1+Math.random()*.05)}return{n:a,efactor:s,interval:t,last_review_date:new Date().getTime()}}function S(c){const e=new Date-c;if(console.log("time interval :",e),e<5e3)return 5;if(e<1e4)return 4;if(e<15e3)return 3;if(e<2e4)return 2}function V(c){return c?(new Date().getTime()-(c.last_review_date+c.interval*864e5))/(24*60*60*1e3):0}function z(c){c.sort((e,a)=>{const s=e.info?e.info.efactor:0,t=a.info?a.info.efactor:0;return s-t})}function J(c,e,a,s=!1){const t=s?S(c):1,r=D(e[a].info,{score:t,lateness:V(e[a].info)});e[a].info=r,z(e),localStorage.setItem("data",JSON.stringify(e)),b.update(i=>(i.timer=r.last_review_date+r.interval*864e5,i))}function O(c){let e=+new Date,a=c-e,s=new Date(a),t=s.getMinutes(),r=s.getSeconds();return a<0?0:`${t<10?"0"+t:t}:${r<10?"0"+r:r}`}const A="data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2041.79725010556467%2042.67405822262168'%20width='125.39175031669402'%20height='128.02217466786504'%3e%3c!--%20svg-source:excalidraw%20--%3e%3cdefs%3e%3cstyle%20class='style-fonts'%3e%20@font-face%20{%20font-family:%20'Virgil';%20src:%20url('https://excalidraw.com/Virgil.woff2');%20}%20@font-face%20{%20font-family:%20'Cascadia';%20src:%20url('https://excalidraw.com/Cascadia.woff2');%20}%20@font-face%20{%20font-family:%20'Assistant';%20src:%20url('https://excalidraw.com/Assistant-Regular.woff2');%20}%20%3c/style%3e%3c/defs%3e%3cg%20stroke-linecap='round'%3e%3cg%20transform='translate(9.953074516998583%2023.76348095134216)%20rotate(0%205.166666666666686%204.333333333333314)'%3e%3cpath%20d='M0.47%20-0.3%20C2.14%201.15,%208.49%206.92,%2010.05%208.37%20M0.05%200.74%20C1.89%202.28,%209.33%207.57,%2011.14%208.91'%20stroke='%232f9e44'%20stroke-width='1'%20fill='none'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cmask%3e%3c/mask%3e%3cg%20stroke-linecap='round'%3e%3cg%20transform='translate(18.78640785033184%2031.319033116055607)%20rotate(0%206.25%20-10.499999999999972)'%3e%3cpath%20d='M-0.28%20-0.3%20C1.65%20-3.8,%209.9%20-17.79,%2012.02%20-21.32%20M0.58%200.73%20C2.63%20-2.68,%2011.09%20-17.15,%2013.01%20-20.78'%20stroke='%232f9e44'%20stroke-width='1'%20fill='none'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cmask%3e%3c/mask%3e%3c/svg%3e",F="data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2035.44751521497966%2034.24178970895696'%20width='106.34254564493898'%20height='102.72536912687087'%3e%3c!--%20svg-source:excalidraw%20--%3e%3cdefs%3e%3cstyle%20class='style-fonts'%3e%20@font-face%20{%20font-family:%20'Virgil';%20src:%20url('https://excalidraw.com/Virgil.woff2');%20}%20@font-face%20{%20font-family:%20'Cascadia';%20src:%20url('https://excalidraw.com/Cascadia.woff2');%20}%20@font-face%20{%20font-family:%20'Assistant';%20src:%20url('https://excalidraw.com/Assistant-Regular.woff2');%20}%20%3c/style%3e%3c/defs%3e%3cg%20stroke-linecap='round'%3e%3cg%20transform='translate(9.890177810611192%2010.577943439735037)%20rotate(0%207.5%206.749999999999972)'%3e%3cpath%20d='M0.51%200.23%20C2.94%202.36,%2012.07%2010.95,%2014.55%2013.15%20M0.11%20-0.13%20C2.71%202.04,%2013.03%2011.31,%2015.56%2013.66'%20stroke='%23e03131'%20stroke-width='1'%20fill='none'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cmask%3e%3c/mask%3e%3cg%20stroke-linecap='round'%3e%3cg%20transform='translate(10.890177810611192%2023.077943439735037)%20rotate(0%205.75%20-6.499999999999972)'%3e%3cpath%20d='M-0.45%20-0.35%20C1.45%20-2.57,%209.99%20-10.88,%2011.91%20-13.08%20M0.32%200.65%20C2.14%20-1.5,%209.71%20-10.11,%2011.69%20-12.42'%20stroke='%23e03131'%20stroke-width='1'%20fill='none'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cmask%3e%3c/mask%3e%3c/svg%3e",G="data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2035.01590859122575%2034.34800758510815'%20width='105.04772577367726'%20height='103.04402275532445'%3e%3c!--%20svg-source:excalidraw%20--%3e%3cdefs%3e%3cstyle%20class='style-fonts'%3e%20@font-face%20{%20font-family:%20'Virgil';%20src:%20url('https://excalidraw.com/Virgil.woff2');%20}%20@font-face%20{%20font-family:%20'Cascadia';%20src:%20url('https://excalidraw.com/Cascadia.woff2');%20}%20@font-face%20{%20font-family:%20'Assistant';%20src:%20url('https://excalidraw.com/Assistant-Regular.woff2');%20}%20%3c/style%3e%3c/defs%3e%3cg%20stroke-linecap='round'%3e%3cg%20transform='translate(10.186698563965024%2010.550781683577156)%20rotate(0%207.5%206.749999999999972)'%3e%3cpath%20d='M0.32%20-0.44%20C2.75%201.89,%2012.37%2011.48,%2014.83%2013.8%20M-0.19%200.52%20C2.15%202.71,%2011.81%2010.73,%2014.31%2012.98'%20stroke='%23868e96'%20stroke-width='1'%20fill='none'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cmask%3e%3c/mask%3e%3cg%20stroke-linecap='round'%3e%3cg%20transform='translate(11.186698563965024%2023.050781683577156)%20rotate(0%205.75%20-6.499999999999972)'%3e%3cpath%20d='M-0.17%200.3%20C1.71%20-1.8,%209.73%20-10.85,%2011.59%20-13.05%20M0.74%20-0.03%20C2.53%20-2,%209.32%20-10.34,%2011.21%20-12.38'%20stroke='%23868e96'%20stroke-width='1'%20fill='none'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cmask%3e%3c/mask%3e%3c/svg%3e";function I(c){let e,a;return{c(){e=w("img"),this.h()},l(s){e=_(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){h(e.src,a=G)||n(e,"src",a),n(e,"alt","cross_grey"),n(e,"class",c[1])},m(s,t){g(s,e,t)},p(s,t){t&2&&n(e,"class",s[1])},d(s){s&&d(e)}}}function R(c){let e,a;return{c(){e=w("img"),this.h()},l(s){e=_(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){h(e.src,a=F)||n(e,"src",a),n(e,"alt","cross"),n(e,"class",c[1])},m(s,t){g(s,e,t)},p(s,t){t&2&&n(e,"class",s[1])},d(s){s&&d(e)}}}function T(c){let e,a;return{c(){e=w("img"),this.h()},l(s){e=_(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){h(e.src,a=A)||n(e,"src",a),n(e,"alt","check"),n(e,"class",c[1])},m(s,t){g(s,e,t)},p(s,t){t&2&&n(e,"class",s[1])},d(s){s&&d(e)}}}function q(c){let e;function a(r,i){return r[0]=="check"?T:r[0]=="cross"?R:I}let s=a(c),t=s(c);return{c(){t.c(),e=M()},l(r){t.l(r),e=M()},m(r,i){t.m(r,i),g(r,e,i)},p(r,[i]){s===(s=a(r))&&t?t.p(r,i):(t.d(1),t=s(r),t&&(t.c(),t.m(e.parentNode,e)))},i:y,o:y,d(r){r&&d(e),t.d(r)}}}function B(c,e,a){let{mode:s}=e,{size:t}=e;return c.$$set=r=>{"mode"in r&&a(0,s=r.mode),"size"in r&&a(1,t=r.size)},[s,t]}class j extends C{constructor(e){super(),v(this,e,B,q,x,{mode:0,size:1})}}export{j as I,b as d,O as g,J as s};
